global
    daemon
    maxconn 256

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    retries 3
    option redispatch

frontend http_front
    bind *:8080
    default_backend backend_servers

backend backend_servers
    balance roundrobin
    option httpchk GET /health
    http-check expect status 200
    server server1 backend1:5000 check
    server server2 backend2:5001 check
    server server3 backend3:5002 check

listen stats
    bind *:8404
    mode http
    stats enable
    stats uri /stats
    stats refresh 10s
    stats show-node
    stats show-legends
    stats auth admin:admin
